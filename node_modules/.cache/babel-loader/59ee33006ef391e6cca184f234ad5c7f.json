{"ast":null,"code":"var _jsxFileName = \"/home/kat/habi/repos/react/front-dagster/src/pages/LogIn/LogIn.jsx\",\n    _s = $RefreshSig$();\n\n// React\nimport React, { useEffect } from \"react\";\nimport { useNavigate } from \"react-router\"; // Components\n// import Loader from \"@habi/habi-react-components/dist/Loader/loader\";\n\nimport { LogInWrapper } from \"./styles\"; // import UserExternalForm from './components/userExternalForm';\n// External\n\nimport GoogleLogin from \"react-google-login\"; // Assets\n\nimport logo from \"../../static/logo/habi.svg\";\nimport loginDecorationStart from \"../../static/img/home/login-decoration-start.svg\";\nimport loginDecorationEnd from \"../../static/img/home/login-decoration-end.svg\"; // Redux\n\nimport { useDispatch } from \"react-redux\"; // import { updateLoginData } from \"../../redux/actions/loginData\";\n// Apis\n\nimport { ROUTES } from \"../../utils/constants/routes\";\nimport { updateLoginData } from \"../../redux/actions/loginData\";\nimport { ROLES } from \"../../utils/constants/constants\";\nimport UserExternalForm from \"./components/userExternalForm\";\nimport UserPool from \"../../api/ctls/Login/UserPool\";\nimport { AuthenticationDetails, CognitoUser } from \"amazon-cognito-identity-js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst LogIn = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate(); // const [loading, setLoading] = useState(false);\n  // const { initialPath } = useSelector((state) => state.loginData);\n\n  useEffect(() => {\n    const dataStorage = localStorage.getItem(\"loginData\");\n\n    if (dataStorage && JSON.parse(dataStorage).isAuthenticated) {\n      dispatch(updateLoginData(JSON.parse(dataStorage)));\n      navigate(ROUTES.READ_CTLS);\n    }\n  });\n\n  const onSuccessLogin = profile => {\n    const dataLogin = {\n      isAuthenticated: true,\n      data: {\n        role: ROLES.ADMIN,\n        email: profile.email,\n        name: profile.name\n      }\n    };\n    dispatch(updateLoginData(dataLogin));\n    localStorage.setItem(\"loginData\", JSON.stringify(dataLogin));\n    navigate(ROUTES.DASHBOARD);\n  };\n\n  const getSession = async () => {\n    return await new Promise((resolve, reject) => {\n      const user = UserPool.getCurrentUser();\n\n      if (user) {\n        user.getSession((err, session) => {\n          if (err) {\n            reject(\"no hay una session\");\n          } else {\n            resolve(session);\n          }\n        });\n      } else {\n        reject(\"no hay un usuario\");\n      }\n    });\n  };\n\n  const onRejectLogin = () => {// navigate(ROUTES.DASHBOARD);\n  };\n\n  const handleLoginExternalUser = async _ref => {\n    let {\n      email,\n      password\n    } = _ref;\n    const user = new CognitoUser({\n      Username: email,\n      Pool: UserPool\n    });\n    const authDetails = new AuthenticationDetails({\n      Username: email,\n      Password: password\n    });\n    user.authenticateUser(authDetails, {\n      onSuccess: data => {\n        onSuccessLogin(data);\n      },\n      onFailure: err => {},\n      newPasswordRequired: data => {\n        onSuccessLogin(data);\n      }\n    });\n  };\n\n  const getLoginCard = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-card animate__animated animate__backInUp\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: logo,\n        alt: \"logo-img\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"title\",\n        children: \"Gesti\\xF3n CTLS | Habi\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"google-button-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"alternative-text\",\n          children: \"Iniciar sesi\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(UserExternalForm, {\n          handleLogin: handleLoginExternalUser\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(LogInWrapper, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"decoration\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: loginDecorationStart,\n        alt: \"Habi decoration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: loginDecorationEnd,\n        alt: \"Habi decoration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), getLoginCard(), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"https://habi.co\",\n          target: \"blank\",\n          className: \"habi-link\",\n          children: \"Habi.co\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 9\n  }, this);\n};\n\n_s(LogIn, \"s5YDugppCHA/sTog5Ue+JVWibms=\", false, function () {\n  return [useDispatch, useNavigate];\n});\n\n_c = LogIn;\nexport { LogIn };\n\nvar _c;\n\n$RefreshReg$(_c, \"LogIn\");","map":{"version":3,"names":["React","useEffect","useNavigate","LogInWrapper","GoogleLogin","logo","loginDecorationStart","loginDecorationEnd","useDispatch","ROUTES","updateLoginData","ROLES","UserExternalForm","UserPool","AuthenticationDetails","CognitoUser","LogIn","dispatch","navigate","dataStorage","localStorage","getItem","JSON","parse","isAuthenticated","READ_CTLS","onSuccessLogin","profile","dataLogin","data","role","ADMIN","email","name","setItem","stringify","DASHBOARD","getSession","Promise","resolve","reject","user","getCurrentUser","err","session","onRejectLogin","handleLoginExternalUser","password","Username","Pool","authDetails","Password","authenticateUser","onSuccess","onFailure","newPasswordRequired","getLoginCard"],"sources":["/home/kat/habi/repos/react/front-dagster/src/pages/LogIn/LogIn.jsx"],"sourcesContent":["// React\nimport React, { useEffect } from \"react\";\nimport { useNavigate } from \"react-router\";\n\n// Components\n// import Loader from \"@habi/habi-react-components/dist/Loader/loader\";\nimport { LogInWrapper } from \"./styles\";\n// import UserExternalForm from './components/userExternalForm';\n\n// External\nimport GoogleLogin from \"react-google-login\";\n\n// Assets\nimport logo from \"../../static/logo/habi.svg\";\nimport loginDecorationStart from \"../../static/img/home/login-decoration-start.svg\";\nimport loginDecorationEnd from \"../../static/img/home/login-decoration-end.svg\";\n\n// Redux\nimport { useDispatch } from \"react-redux\";\n// import { updateLoginData } from \"../../redux/actions/loginData\";\n\n// Apis\nimport { ROUTES } from \"../../utils/constants/routes\";\nimport { updateLoginData } from \"../../redux/actions/loginData\";\nimport { ROLES } from \"../../utils/constants/constants\";\nimport UserExternalForm from \"./components/userExternalForm\";\nimport UserPool from \"../../api/ctls/Login/UserPool\";\nimport { AuthenticationDetails, CognitoUser } from \"amazon-cognito-identity-js\";\n\nconst LogIn = () => {\n    const dispatch = useDispatch();\n    const navigate = useNavigate();\n    // const [loading, setLoading] = useState(false);\n    // const { initialPath } = useSelector((state) => state.loginData);\n    useEffect(() => {\n        const dataStorage = localStorage.getItem(\"loginData\");\n        if (dataStorage && JSON.parse(dataStorage).isAuthenticated) {\n            dispatch(updateLoginData(JSON.parse(dataStorage)));\n            navigate(ROUTES.READ_CTLS);\n        }\n    });\n\n    const onSuccessLogin = (profile) => {\n        const dataLogin = {\n            isAuthenticated: true,\n            data: {\n                role: ROLES.ADMIN,\n                email: profile.email,\n                name: profile.name,\n            },\n        };\n        dispatch(updateLoginData(dataLogin));\n        localStorage.setItem(\"loginData\", JSON.stringify(dataLogin));\n        navigate(ROUTES.DASHBOARD);\n    };\n\n    const getSession = async () => {\n        return await new Promise((resolve, reject) => {\n            const user = UserPool.getCurrentUser();\n            if (user) {\n                user.getSession((err, session) => {\n                    if (err) {\n                        reject(\"no hay una session\");\n                    } else {\n                        resolve(session);\n                    }\n                });\n            } else {\n                reject(\"no hay un usuario\");\n            }\n        });\n    };\n\n    const onRejectLogin = () => {\n        // navigate(ROUTES.DASHBOARD);\n    };\n\n    const handleLoginExternalUser = async ({ email, password }) => {\n        const user = new CognitoUser({\n            Username: email,\n            Pool: UserPool,\n        });\n\n        const authDetails = new AuthenticationDetails({\n            Username: email,\n            Password: password,\n        });\n\n        user.authenticateUser(authDetails, {\n            onSuccess: (data) => {\n                onSuccessLogin(data);\n            },\n            onFailure: (err) => { },\n            newPasswordRequired: (data) => {\n                onSuccessLogin(data);\n            },\n        });\n    };\n\n    const getLoginCard = () => {\n        return (\n            <div className=\"login-card animate__animated animate__backInUp\">\n                <img src={logo} alt=\"logo-img\" />\n                <span className=\"title\">Gestión CTLS | Habi</span>\n                <div className=\"google-button-container\">\n                    <span className=\"alternative-text\">Iniciar sesión</span>\n                    <UserExternalForm handleLogin={handleLoginExternalUser} />\n                </div>\n            </div>\n        );\n    };\n\n    return (\n        <LogInWrapper>\n            <div className=\"decoration\">\n                <img src={loginDecorationStart} alt=\"Habi decoration\" />\n                <img src={loginDecorationEnd} alt=\"Habi decoration\" />\n            </div>\n            <div className=\"login-container\">\n                <div />\n                {/* {loading ? getLoading() : getLoginCard()} */}\n                {getLoginCard()}\n                <div>\n                    <a href=\"https://habi.co\" target=\"blank\" className=\"habi-link\">\n                        Habi.co\n                    </a>\n                </div>\n            </div>\n        </LogInWrapper>\n    );\n};\n\nexport { LogIn };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}